<!DOCTYPE html> 
<html>
   <head>
      <title>Genesys Selector Demo</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
      <meta http-equiv="Pragma" content="no-cache" />
      <meta http-equiv="Expires" content="0" />
      <script type="text/javascript" 	src="https://code.jquery.com/jquery-3.5.0.js"></script>	
      <script type="text/javascript"  src = 'videoengager/js/videoengager.widget.js'></script>
      <script>

                  if (!window._genesys) window._genesys = {};
                  if (!window._gt) window._gt = [];
                  window._genesys.widgets = {
                        main: {
                              debug: true,
                              theme: "dark",
                              plugins: [
                              "cx-webchat",
                              "cx-webchat-service",
                              "cx-cobrowse",
                              "cx-channel-selector",
                              "cx-stats-service",
                              "cx-call-us",
                              "cx-callback-service",
                              "cx-callback",
                              "cx-calendar",
                              "cx-sidebar"
                              ],
                              lang: "en"
                        },
                        videoengager: {
                              //callHolder: "myVideoHolder", 
                              platform: "purecloud", //engage     or purecloud
                              tenantId : "0FphTk091nt7G1W7", 
                              veUrl: "https://videome.leadsecure.com/", 
                              audioOnly: false, 
                              autoAccept: true, 
                              enablePrecall: false,
                              useWebChatForm: true,
                              webChatFormData: {
                                    nickname: 'Jonny',
                                    firstname: 'Johnathan',
                                    lastname: 'Smith',
                                    email: 'jon.smith@mail.com',
                                    subject: 'product questions',
                                    userData: {}
                              },
                              i18n: { "en": { 
                                          "ChatFormSubmitVideo": "Start Video",
                                          "WebChatTitleVideo": "Video Chat",
                                          "ChatFormSubmitAudio": "Start Audio",
                                          "WebChatTitleAudio": "Audio Chat",
                                           },
                                      "fr": {
                                          "ChatFormSubmitVideo": "Démarrer la vidéo",
                                          "WebChatTitleVideo": "Chat la vidéo",
                                          "ChatFormSubmitAudio": "Démarrer la audio",
                                          "WebChatTitleAudio": "Chat audio",
                                      }
                              },
                           /* form: {
                                    wrapper: "<table></table>",
            				inputs: [
		            			{ id:"form_firstname", name: "firstname", maxlength: "100", placeholder: "FirstName", label: "FirstName", autofocus: !0, "aria-required": !0 }
				            ]
                              }  */
                        },
                        webchat: {
                              transport: {
                              type: 'purecloud-v2-sockets',
                              dataURL: 'https://api.mypurecloud.com',
                              deploymentKey: '973f8326-c601-40c6-82ce-b87e6dafef1c',
                              orgGuid: 'c4b553c3-ee42-4846-aeb1-f0da3d85058e',
                              interactionData: {
                                    routing: {
                                          targetType: 'QUEUE',
                                          targetAddress: 'TestQueue',
                                          priority: 2
                                    }
                              }

                              }, 
                           /*   form: {
                              wrapper: "<table role='none'>",
                              inputs: [{
                                          id: "cx_sendmessage_form_firstname",
                                          name: "firstname",
                                          maxlength: "100",
                                          placeholder: "@i18n:sendmessage.PlaceholderFirstName",
                                          label: "@i18n:sendmessage.FirstName",
                                          autofocus: !0,
                                          "aria-required": !0
                                    },
                              ],
                              },
                              */
                              cometD: {
                              enabled: false,

                              },
                              autoInvite: {
                              enabled: true,
                              timeToInviteSeconds: 5,
                              inviteTimeoutSeconds: 30
                              },
                              chatButton: {
                              enabled: false,
                              openDelay: 1000,
                              effectDuration: 300,
                              hideDuringInvite: true
                              },
                              uploadsEnabled: true
                        },
                        channelselector: {
                              ewtRefreshInterval: 10,
                              channels: [{
                                    enable: true,
                                    clickCommand: 'VideoEngager.startVideoEngager',
                                    readyEvent: 'VideoEngager.ready',
                                    displayName: 'Video Chat',
                                    i18n: 'VideoTitle',
                                    icon: 'videochat',
                                    ewt: {
                                          display: true,
                                          queue: 'Omnichannel',
                                          availabilityThresholdMin: 300,
                                          availabilityThresholdMax: 480,
                                          hideChannelWhenThresholdMax: false
                                    },
                              },
                              {
                                    enable: true,
                                    clickCommand: "WebChat.open",
                                    readyEvent: "WebChat.ready",
                                    displayName: "Web Chat",
                                    i10n: "ChatTitle",
                                    icon: "chat",
                                    html: "",
                                    ewt: {
                                          display: true,
                                          queue: "",
                                          availabilityThresholdMin: 300,
                                          availabilityThresholdMax: 3600,
                                          hideChannelWhenThresholdMax: false
                                    },
                              },
                              {
                                    enable: true,
                                    clickCommand: "VideoEngager.startCalendar",
                                    readyEvent: "Calendar.ready",
                                    displayName: "Schedule Video",
                                    i10n: "ChatTitle",
                                    icon: "videochat",
                                    html: "",
                                    ewt: {
                                          display: true,
                                          queue: "",
                                          availabilityThresholdMin: 300,
                                          availabilityThresholdMax: 3600,
                                          hideChannelWhenThresholdMax: false
                                    },
                              },
                              {
                                    enable: true,
                                    clickCommand: "Callback.open",
                                    readyEvent: "Callback.ready",
                                    displayName: "Callback",
                                    i10n: "ChatTitle",
                                    icon: "videochat",
                                    html: "",
                                    ewt: {
                                          display: true,
                                          queue: "",
                                          availabilityThresholdMin: 300,
                                          availabilityThresholdMax: 3600,
                                          hideChannelWhenThresholdMax: false
                                    },
                              },
                              ]
                        },
                        sidebar: {
                              showOnStartup: true,
                              position: "right",
                              expandOnHover: true,
                              channels: [{
                              name: "ChannelSelector",
                              clickCommand: "ChannelSelector.open",
                              readyEvent: "ChannelSelector.ready",
                              clickOptions: {},
                              displayName: "Live Assistance",
                              displayTitle: "How would you like to get in touch?",
                              icon: "agent"
                              }, ]
                        },
                        extensions: {
                              'VideoEngager': videoEngager.initExtension
                        },
                        calendar: {
                              showAvailability: false,
                              numberOfDays: 5,
                              hideUnavailableTimeSlots: false,
                              calendarHours: {
                                    interval: 10,
                                    allDay: {
                                          openTime: '09:00',
                                          closeTime: '23:59'
                                    }
                              }
                        },
                        callback: {
                              dataURL: '',
                              userData: {},
                              countryCodes: true,
                              immediateCallback: true,
                              scheduledCallback: true,
                              ewt: {
                                    display: true,
                                    queue: 'TestQueue',
                                    threshold: 2000,
                                    immediateCallback: {
                                          thresholdMin: 1000,
                                          thresholdMax: 3000
                                    } 
                                    
                              },
                              form: {
                                    wrapper: "<table></table>",
                                    inputs: [

                                          {
                                                      id: "cx_form_callback_firstname",
                                                      name: "firstname",
                                                      maxlength: "100",
                                                      placeholder: "@i18n:callback.CallbackPlaceholderOptional",
                                                      label: "@i18n:callback.CallbackFirstName"
                                                },

                                                {
                                                      id: "cx_form_callback_lastname",
                                                      name: "lastname",
                                                      maxlength: "100",
                                                      placeholder: "@i18n:callback.CallbackPlaceholderOptional",
                                                      label: "@i18n:callback.CallbackLastName"
                                                },

                                                {
                                                      id: "cx_form_callback_phone_number",
                                                      name: "phonenumber",
                                                      maxlength: "14",
                                                      placeholder: "@i18n:callback.CallbackPlaceholderRequired",
                                                      label: "@i18n:callback.CallbackPhoneNumber",

                                                      onkeypress: function(event) {
                                                
                                                            // To allow only number inputs
                                                            return (event.charCode >= 48 && event.charCode <= 57) || (event.charCode == 43)
                                                      }
                                                }
                                    ]
                              }

                        }
                  };

      </script>
      <style type="text/css"> body {
         background-image: url(./videoengager/img/ve.svg);
         background-repeat: no-repeat;
         background-size: contain;
         background-attachment: fixed;
         background-position: center;
         } 
      </style>
   </head>
   <body >
      <script type="text/javascript"  src = 'widgets.min.js'></script>
      <link id="genesys-widgets-styles" href="widgets.min.css" type="text/css" rel="stylesheet"/>
   </body>
</html>